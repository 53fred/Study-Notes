# 编译过程
编译过程分为四个过程：编译预处理，(编译、优化），汇编，链接。
## 1.编译预处理
**流程：**  
- 读取C/C++源程序，对其中的预处理命令（以#开头的指令）进行处理
- 删除所有的注释
- 添加行号和文件名标识
- 保留所有的#pragma编译器指令

在编译器对源程序进行编译之前，首先要由预处理对程序文本进行预处理。预处理器提供了一组预编译处理指令和预处理操作符。预处理指令实际上不是C++语言的一部分，它只是用来扩充C++程序设计的环境。**所有的预处理指令在程序中都是以“#”来引导**，每一条预处理指令单独占用一行，不要用分号结束。预处理指令可以根据需要出现在程序的位置。  
Eg：
```C++
#include
#define
#undef
#if
#ifdef
#ifndef
#endif
```
C++预处理命令主要有以下三种：
- 宏定义
- 文件包含
- 条件编译

### 宏定义
#define，只用作宏替换，不占有内存。
### 文件包含
#include，标准C编译器至少支持八重嵌套包含。
#### ""与<>的区别
<>：这种格式告诉预处理程序在编译器自带的或外部库的头文件中搜索被包含的头文件。  
""：这种格式告诉预处理程序在当前被编译的应用程序的源代码文件中搜索被包含的头文件，如果找不到，再搜索编译器自带的头文件。  

## 2.编译、优化
**编译器**将预处理完的文件进行一系列词法分析、语法分析、语义分析及优化后，将源码 .cpp 文件翻译成 **.s 汇编代码**。  

## 3.汇编
将编译完的汇编代码文件翻译成机器指令，并生成可重定位目标程序的 **.o文件**，该文件为二进制文件，字节编码是**机器指令**。  
**汇编器**是将汇编代码转变成机器可以执行的指令，每一个汇编语句几乎都对应一条机器指令。所以汇编器的汇编过程相对于编译器来讲比较简单，它没有复杂的语法，也没有语义，也不需要做指令优化，只是根据汇编指令和机器指令的对照表一一翻译即可。  

## 4.链接
汇编程序生成的目标文件，即 .o 文件，并不会立即执行，因为可能会出现：.cpp 文件中的函数引用了另一个 .cpp 文件中定义的符号或者调用了某个库文件中的函数。  
**链接器**的主要工作就是将有关的目标文件彼此相连接，也就是将在一个文件中引用的符号同该符号在另外一个文件中的定义连接起来，使得所有的这些目标文件成为一个能够被操作系统装入执行的统一整体，从而生成可执行的程序文件。
