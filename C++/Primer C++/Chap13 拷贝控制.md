# 1. 拷贝、赋值与销毁
- 五种特殊的成员函数：  
1. 拷贝构造函数  
2. 拷贝赋值运算符  
3. 移动构造函数  
4. 移动赋值运算符  
5. 析构函数  

拷贝和移动构造函数定义了当用同类型的一个对象初始化本对象时做什么。  
拷贝和移动赋值运算符定义了将一个对象赋予同类型的另一个对象时做什么。  
析构函数定义了此类型对象销毁时的操作。

## 1.1. 拷贝构造函数
- 如果一个构造函数的第一个参数是自身类类型的引用，且任何额外参数都有默认值，则此构造函数是拷贝构造函数。
- 每个成员的类型决定了它的拷贝方式，类类型调用其拷贝构造函数；对于内置类型，直接拷贝；对于数组的拷贝是逐个元素的拷贝。
```C++
class Foo{
public:
    Foo();  //默认构造函数
    Foo(const Foo&);  //拷贝构造函数
}
```  
- 拷贝构造函数通常不应该是explicit的。

### 1.1.1. 直接初始化与拷贝初始化区别
```C++
string dots(10, '.');   //直接初始化
string s(dots);         //直接初始化
string s2 = dots;       //拷贝初始化
string s3 = "abc";      //拷贝初始化
string s4 = string(10, '.');   //拷贝初始化
string *s5 = new string(s2);   //拷贝初始化
```

### 1.1.2. 拷贝初始化发生的情况
- 用=**定义**变量；
- 将一个对象作为实参传递给一个非引用类型的形参；  
- 从一个返回类型为非引用类型的函数返回一个对象；  
- 用花括号列表初始化一个数组中的元素或一个聚合类中的成员。  
某些类类型还会对他们分配的对象使用拷贝初始化。  
Eg：调用insert和push进行拷贝初始化，调用emplace进行直接初始化。  

### 1.1.3. 错误分析
```C++
Sales_data::Sales_data(Sales_data rhs);
```
- 此为一个类的拷贝构造函数，作为函数其非引用类型的参数需要进行拷贝初始化，要调用拷贝构造函数以拷贝实参，无限循环。
